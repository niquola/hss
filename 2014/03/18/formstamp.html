<!DOCTYPE html>
<html lang="ru" ng-app="app">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">
    <title>FormStamp</title>
    <link href="../../../build/lib.css" rel="stylesheet">
    <link href="../../../build/app.css" rel="stylesheet">
  </head>
  <body>
    <!DOCTYPE html>
<html lang="ru" ng-app="app">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">
    <title>FormStamp</title>
    <link href="/build/lib.css" rel="stylesheet">
    <link href="/build/app.css" rel="stylesheet">
    <link href="/old/css/syntax.css" rel="stylesheet">
  </head>
  <body>
    <div class="cnt">
      <a class="tail logo tech" href="/blog.html">
        <embed type='image/svg+xml' src='/svgs/samurai/Samurai_01.svg'/>
      </a>
      <div class="tail trbl">
        <h2> FormStamp</h2>
      </div>
      <a href="/blog.html" class="tail person dima">
        <h1>Dmitry Nechaev</h1>
      </a>
    </div>
    <div class="cnt">
      <div class="tail col-4" style="color: black;">
        <div style="font-size: 18px; padding-top: 60px; width: 45em; margin: 0 auto;">
        <h1>FormStamp - библиотека виджетов для AngularJS</h1>

<h2>Мотивация</h2>

<p>AngularJS - это стремительно набирающий популярность JS-фреймворк, упрощающий разработку сложных и динамичных веб-приложений. Наша команда использует AngularJS в ряде проектов со сложным пользовательским интерфейсом, и в процессе работы мы остро ощущали нехватку хорошей библиотеки, предоставляющей набор единообразных виджетов, таких как datetime picker, select, multiple select и так далее. Конечно, нам было
известно о проекте <a href="http://angular-ui.github.io/">Angular UI</a>, но некоторых виджетов, которые нам были нужны, AngularUI не предоставлял.</p>

<p>Кроме того, мы хотели иметь аналог рельсового form builder-а, но на фронтенде. Form builder позволяет программисту описывать форму декларативно, беря на себя генерацию разметки и вывод ошибок.</p>

<p>Решением этих проблем стала разработанная нами библиотека FormStamp, которая предоставляет:</p>

<ul>
<li>Form Builder - наивысший уровень для работы с формами, созданный по аналогии с генераторами форм из экосистемы Ruby on Rails;</li>
<li>набор виджетов, покрывающих 80% задач, встречающихся при работе с формами и не решаемых стандартными элементами HTML5;</li>
<li>низкоуровневые компоненты, позволяющие собирать новые виджеты.</li>
</ul>

<p>При разработке в библиотеку были заложены следующие принципы:</p>

<ul>
<li>все виджеты написаны &quot;с нуля&quot; с использованием директив AngularJS, что позволяет сократить код и сделать его более читаемым;</li>
<li>полная интеграция с AngularJS (поддержка ngModel, ngRequired...);</li>
<li>стилизация по-умолчанию с помощью Bootstrap.</li>
</ul>

<h2>Инструкция по установке</h2>

<p>FormStamp может быть подключен в ваш проект с помощью пакетной системы Bower:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">bower install angular-formstamp
</code></pre></div>
<h2>Form Builder</h2>

<p>Выразительный декларативный подход AngularJS снижает количество кода, который нужно написать для создания UI. Однако, даже с использованием этого подхода при создании простой формы с проверками заполненности полей и отображением сообщений об ошибках приходится писать много повторяющегося кода:</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;form</span> <span class="na">class=</span><span class="s">&quot;form-horizontal&quot;</span> <span class="na">role=</span><span class="s">&quot;form&quot;</span> <span class="na">name=</span><span class="s">&quot;form&quot;</span> <span class="na">ng-app=</span><span class="s">&quot;form-demo&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span> <span class="na">ng-class=</span><span class="s">&quot;{&#39;has-error&#39;: form.username.$invalid}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;username&quot;</span> <span class="na">class=</span><span class="s">&quot;col-sm-2 control-label&quot;</span><span class="nt">&gt;</span>Username<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-10&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span>
                   <span class="na">class=</span><span class="s">&quot;form-control&quot;</span>
                   <span class="na">id=</span><span class="s">&quot;username&quot;</span>
                   <span class="na">placeholder=</span><span class="s">&quot;Username&quot;</span>
                   <span class="na">required=</span><span class="s">&quot;required&quot;</span>
                   <span class="na">ng-pattern=</span><span class="s">&quot;/awesome/&quot;</span>
                   <span class="na">name=</span><span class="s">&quot;username&quot;</span>
                   <span class="na">ng-model=</span><span class="s">&quot;username&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;alert alert-danger&quot;</span> <span class="na">ng-show=</span><span class="s">&#39;form.username.$error.pattern&#39;</span><span class="nt">&gt;</span>
                Username should be awesome
            <span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span> <span class="na">ng-class=</span><span class="s">&quot;{&#39;has-error&#39;: form.email.$invalid}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;email&quot;</span> <span class="na">class=</span><span class="s">&quot;col-sm-2 control-label&quot;</span><span class="nt">&gt;</span>Email<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-10&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;email&quot;</span>
                   <span class="na">class=</span><span class="s">&quot;form-control&quot;</span>
                   <span class="na">id=</span><span class="s">&quot;email&quot;</span>
                   <span class="na">placeholder=</span><span class="s">&quot;Email&quot;</span>
                   <span class="na">required=</span><span class="s">&quot;required&quot;</span>
                   <span class="na">name=</span><span class="s">&quot;email&quot;</span>
                   <span class="na">ng-model=</span><span class="s">&quot;email&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;alert alert-danger&quot;</span> <span class="na">ng-show=</span><span class="s">&#39;form.email.$error.email&#39;</span><span class="nt">&gt;</span>
                Email should be valid
            <span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span> <span class="na">ng-class=</span><span class="s">&quot;{&#39;has-error&#39;: form.password.$invalid}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;password&quot;</span> <span class="na">class=</span><span class="s">&quot;col-sm-2 control-label&quot;</span><span class="nt">&gt;</span>Password<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-10&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;password&quot;</span>
                   <span class="na">class=</span><span class="s">&quot;form-control&quot;</span>
                   <span class="na">id=</span><span class="s">&quot;password&quot;</span>
                   <span class="na">placeholder=</span><span class="s">&quot;Password&quot;</span>
                   <span class="na">required=</span><span class="s">&quot;required&quot;</span>
                   <span class="na">name=</span><span class="s">&quot;password&quot;</span>
                   <span class="na">ng-model=</span><span class="s">&quot;password&quot;</span>
                   <span class="na">ng-minlength=</span><span class="s">&#39;6&#39;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;alert alert-danger&quot;</span> <span class="na">ng-show=</span><span class="s">&#39;form.password.$error.minlength&#39;</span><span class="nt">&gt;</span>
                Password should be longer
            <span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;birthDate&quot;</span> <span class="na">class=</span><span class="s">&quot;col-sm-2 control-label&quot;</span><span class="nt">&gt;</span>Birth Date<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-10&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;date&quot;</span>
                   <span class="na">class=</span><span class="s">&quot;form-control&quot;</span>
                   <span class="na">id=</span><span class="s">&quot;birthDate&quot;</span>
                   <span class="na">placeholder=</span><span class="s">&quot;Birth Date&quot;</span>
                   <span class="na">ng-model=</span><span class="s">&quot;birthDate&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-offset-2 col-sm-10&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-default&quot;</span><span class="nt">&gt;</span>Sign up<span class="nt">&lt;/button&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div>

<p>Эту проблему решает компонент Form Builder - для создания формы достаточно указать:</p>

<ul>
<li>модель, с которой связана форма;</li>
<li>атрибуты модели, которые отображаются в форме;</li>
<li>типы элементов формы, соответствующие каждому из отображаемых в форме атрибутов.</li>
</ul>

<p>С помощью Form Builder указанную выше форму с подсветкой ошибок можно создать намного меньшим количеством кода:</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;fs-form-for</span> <span class="na">model=</span><span class="s">&quot;samurai&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">&quot;form-horizontal&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;fs-input</span> <span class="na">as=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">required=</span><span class="s">&quot;&quot;</span> <span class="na">label=</span><span class="s">&quot;Name&quot;</span><span class="nt">&gt;&lt;/fs-input&gt;</span>
    <span class="nt">&lt;fs-input</span> <span class="na">as=</span><span class="s">&quot;email&quot;</span> <span class="na">name=</span><span class="s">&quot;email&quot;</span> <span class="na">required=</span><span class="s">&quot;&quot;</span> <span class="na">label=</span><span class="s">&quot;Email&quot;</span><span class="nt">&gt;&lt;/fs-input&gt;</span>
    <span class="nt">&lt;fs-input</span> <span class="na">as=</span><span class="s">&quot;password&quot;</span> <span class="na">name=</span><span class="s">&quot;password&quot;</span> <span class="na">required=</span><span class="s">&quot;&quot;</span> <span class="na">label=</span><span class="s">&quot;Email&quot;</span><span class="nt">&gt;&lt;/fs-input&gt;</span>
    <span class="nt">&lt;fs-input</span> <span class="na">as=</span><span class="s">&quot;fs-date&quot;</span> <span class="na">name=</span><span class="s">&quot;birthdate&quot;</span> <span class="na">required=</span><span class="s">&quot;&quot;</span> <span class="na">label=</span><span class="s">&quot;Date of Birth&quot;</span><span class="nt">&gt;&lt;/fs-input&gt;</span>
  <span class="nt">&lt;/fieldset&gt;</span>
<span class="nt">&lt;/fs-form-for&gt;</span>
</code></pre></div>

<p>Пояснения:</p>

<ul>
<li><code>fsFormFor</code> - директива, создающая форму, атрибут <code>model</code> указывает на модель, для которой создается форма;</li>
<li><code>fsInput</code>   - директива, описывающая каждый элемент в форме со следующими атрибутами:</li>
<li><code>as</code> - тип элемента формы;</li>
<li><code>name</code> - имя атрибута модели;</li>
<li><code>label</code> - текст метки.</li>
</ul>

<p>Все остальные атрибуты делегируются элементу формы, указанному в атрибуте <code>as</code>.</p>

<h2>Набор виджетов</h2>

<p>Чем сложнее ваше приложение, тем меньше вам будет хватать стандартных элементов форм и тем скорее вам понадобятся дополнительные виджеты. На данный момент существует не так много виджетов, рассчитанных на интеграцию с AngularJS, а из тех, что есть, часть является оберткой над jQuery-виджетами. Библиотека FormStamp содержит написанные с нуля с использованием API AngularJS виджеты, решающие те задачи, с которыми мы сталкивались чаще всего в нашей работе:</p>

<ul>
<li>select с возможностью фильтрации по введенному значению;</li>
<li>select с поддержкой freetext (combo box) ;</li>
<li>multiselect с возможностью фильтрации по введенному значению;</li>
<li>multiselect с поддержкой freetext (tags input);</li>
<li>radiogroup;</li>
<li>checkboxes;</li>
<li>виджеты для работы с датой и/или временем и календарь.</li>
</ul>

<p>Рассмотрим работу с select виджетом, для создания которого используется директива <code>fsSelect</code>. Директива подерживает атрибуты <code>freetext</code>, <code>items</code>, <code>ng-model</code>, <code>ng-required</code>, <code>ng-disabled</code>.</p>

<p>Атрибут</p>

<div class="highlight"><pre><code class="js"><span class="nx">freetext</span>
</code></pre></div>

<p>(по умолчанию false) определяет поведение виджета. При</p>

<div class="highlight"><pre><code class="js"><span class="nx">freetext</span><span class="o">=</span><span class="kc">false</span>
</code></pre></div>

<p>виджет ведет себя как select, то есть позволяет выбрать один элемент из списка вариантов. При</p>

<div class="highlight"><pre><code class="js"><span class="nx">freetext</span><span class="o">=</span><span class="kc">true</span>
</code></pre></div>

<p>виджет ведет себя как combo box, то есть позволяет выбрать значение из списка вариантов или ввести любое другое.</p>

<p>Атрибут</p>

<div class="highlight"><pre><code class="js"><span class="nx">items</span>
</code></pre></div>

<p>указывает, какое свойство скоупа содержит список вариантов, отображаемых в виджете. При</p>

<div class="highlight"><pre><code class="js"><span class="nx">freetext</span><span class="o">=</span><span class="kc">false</span>
</code></pre></div>

<p>варианты могут быть как объектами, так и примитивными типами.
При</p>

<div class="highlight"><pre><code class="js"><span class="nx">freetext</span><span class="o">=</span><span class="kc">true</span>
</code></pre></div>

<p>варианты могут быть только строками.</p>

<p>Атрибут</p>

<div class="highlight"><pre><code class="js"><span class="nx">ng</span><span class="o">-</span><span class="nx">model</span>
</code></pre></div>

<p>является стандартной директивой <a href="http://docs.angularjs.org/api/ng/directive/ngModel">ngModel</a>.</p>

<p>Атрибут</p>

<div class="highlight"><pre><code class="js"><span class="nx">ng</span><span class="o">-</span><span class="nx">disabled</span>
</code></pre></div>

<p>указывает, какое свойство скоупа определяет, будет ли виджет disabled/enabled.</p>

<p>Для создания combo box, варианты которого содержатся в <code>$scope.arrayOfOptions</code>, выбранный вариант связан со <code>$scope.selectedOption</code>, а состояние disabled/enabled зависит от <code>$scope.flag</code>, запишем директиву следующим образом:</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;div</span> <span class="na">fs-select</span> <span class="na">items=</span><span class="s">”arrayOfOptions”</span>
               <span class="na">ng-disabled=</span><span class="s">”flag”</span>
               <span class="na">ng-model=</span><span class="s">”selectedOption”</span>
               <span class="na">freetext=</span><span class="s">”true”</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div>

<p>Примеры работы с остальными виджетами и Form Builder размещены на <a href="http://formstamp.github.io/" title="FormStamp">странице библиотеки</a>.</p>

<h2>Директивы</h2>

<p>Для того, чтобы облегчить написание дополнительных виджетов, мы начали выделять части функциональности в низкоуровневые директивы:</p>

<ul>
<li><code>fsList</code> - отображает список элементов, позволяет выделять элемент в списке и перемещать выделение с клавиатуры;</li>
<li><code>fsNullForm</code> - скрывает элемент формы, связанный с ngModel от родительской формы;</li>
<li><code>fsInput</code> - упрощает обработку событий клавиатуры и смены фокуса;</li>
<li><code>fsCalendar</code> - отображает календарь и позволяет отмечать дату, как выбранную.</li>
</ul>

<p>Для примера создадим плей-лист для плеера, используя <code>fsList</code> и <code>fsInput</code>. Работа с <code>fsList</code> происходит с помощью взаимодействия с <code>listInterface</code> свойством на <code>$scope</code>. <code>listInterface</code> имеет следующие свойства:</p>

<ul>
<li><code>selectedItem</code> - текущее выбранное значение. Только на чтение.</li>
<li><code>onSelect(value)</code> - Обработчик события выбора значение. Должен быть реализован пользователем.</li>
<li><code>move(d)</code> - Функция, которая перемещает указатель на указанное количество элементов.</li>
</ul>

<p>Создадим директиву, которая будет оборачивать в себя <code>audio</code> тег из html5:</p>

<div class="highlight"><pre><code class="js">  <span class="nx">app</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">&quot;demoAudio&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">restrict</span><span class="o">:</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span>
      <span class="nx">scope</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">track</span><span class="o">:</span> <span class="s1">&#39;=&#39;</span>
      <span class="p">},</span>
      <span class="nx">template</span><span class="o">:</span> <span class="s2">&quot;&lt;audio controls /&gt;&quot;</span><span class="p">,</span>
      <span class="nx">replace</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">link</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$element</span><span class="p">,</span> <span class="nx">$attrs</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span><span class="s1">&#39;track&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">track</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">$element</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span> <span class="nx">track</span><span class="p">.</span><span class="nx">stream_url</span> <span class="o">+</span> <span class="s2">&quot;?client_id=8399f2e0577e0acb4eee4d65d6c6cce6&quot;</span><span class="p">);</span>
          <span class="k">return</span> <span class="nx">$element</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">play</span><span class="p">();</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">});</span>
</code></pre></div>

<p>Подключим SoundCloud SDK</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://connect.soundcloud.com/sdk.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div>

<p>Далее создадим контроллер, для связывания этих элементов:</p>

<div class="highlight"><pre><code class="js"><span class="kd">function</span> <span class="nx">ListDemoCtrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Инициализация SoundCloud SDK</span>
  <span class="nx">SC</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span>
    <span class="nx">client_id</span><span class="o">:</span> <span class="s1">&#39;8399f2e0577e0acb4eee4d65d6c6cce6&#39;</span>
  <span class="p">});</span>

  <span class="c1">// Реализация поиска по SoundCloud</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span><span class="s1">&#39;search&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">SC</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/tracks&#39;</span><span class="p">,</span>
           <span class="p">{</span> <span class="nx">q</span><span class="o">:</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">search</span><span class="p">,</span> <span class="nx">license</span><span class="o">:</span> <span class="s1">&#39;cc-by-sa&#39;</span> <span class="p">},</span>
           <span class="kd">function</span><span class="p">(</span><span class="nx">tracks</span><span class="p">)</span> <span class="p">{</span>
             <span class="nx">$scope</span><span class="p">.</span><span class="nx">$apply</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">tracks</span> <span class="o">=</span> <span class="nx">tracks</span> <span class="p">})</span>
           <span class="p">})</span>
  <span class="p">});</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">search</span> <span class="o">=</span> <span class="s1">&#39;bach&#39;</span><span class="p">;</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">tracks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="c1">// Оборачиваем функцию для перемещения выбранного значения в fsList</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">move</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">listInterface</span><span class="p">.</span><span class="nx">move</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Добавляем обработчик выбранного значения в fsList</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">listInterface</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">onSelect</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">selectedItem</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">selectedItem</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">select</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selectedItem</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">selectedTrack</span> <span class="o">=</span> <span class="nx">selectedItem</span> <span class="o">||</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">listInterface</span><span class="p">.</span><span class="nx">selectedItem</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>

<p>И само приложение:</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">&quot;ListDemoCtrl&quot;</span> <span class="na">style=</span><span class="s">&quot;postion: relative;&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-xs-7&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- Инициализируем fsInput и добавляем обработчики клавиатуры  --&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">autofocus=</span><span class="s">&quot;1&quot;</span> <span class="na">fs-input</span>
             <span class="na">fs-up=</span><span class="s">&quot;move(-1)&quot;</span> <span class="na">fs-down=</span><span class="s">&quot;move(1)&quot;</span> <span class="na">fs-enter=</span><span class="s">&quot;select()&quot;</span>
             <span class="na">ng-model=</span><span class="s">&quot;search&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- Инициализирум fsList и передаем ему список треков --&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">fs-list=</span><span class="s">&quot;&quot;</span> <span class="na">items=</span><span class="s">&quot;tracks&quot;</span> <span class="na">class=</span><span class="s">&quot;no-popup&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- Описываем внутренний темплейт переданних треков --&gt;</span>
        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;&quot;</span> <span class="na">width=</span><span class="s">&quot;30&quot;</span> <span class="na">height=</span><span class="s">&quot;30&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;small</span> <span class="na">class=</span><span class="s">&quot;text-muted&quot;</span><span class="nt">&gt;&lt;/small&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-xs-5&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- Связиваем выбранное значение в fsList с аудио-плеером --&gt;</span>
      <span class="nt">&lt;demo-audio</span> <span class="na">track=</span><span class="s">&quot;selectedTrack&quot;</span><span class="nt">&gt;&lt;/demo-audio&gt;</span>
      <span class="nt">&lt;pre</span> <span class="na">style=</span><span class="s">&quot;margin-top: 20px;&quot;</span><span class="nt">&gt;</span>Selected Item: <span class="nt">&lt;/pre&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>

<p>В результате получаем вот такой плеер:
<img src="/screenshots/playlist.png"/>
Живой пример вы можете посмотреть <a href="http://formstamp.github.io/#/widgets/list">здесь</a>.</p>

<p>В следующей статье мы более подробно рассмотрим создание формы с использованием FormStamp.</p>

<p><a href="http://formstamp.github.io/" title="FormStamp">Демо и описание библиотеки</a></p>

<p><a href="https://github.com/formstamp/formstamp">Код библиотеки</a></p>

<p><a href="http://healthsamurai.github.io/">Страница команды</a></p>

        </div>
      </div>
      <div class="tail tech">
        <h1>18 March 2014 </h1>
        <hr/>
        <div class="w-tags layout_block">
          <div class="w-tags-h">
            <div class="w-tags-list">

              <div class="w-tags-item">
                <a class="w-tags-item-link"
                  href="/tag/Open Source, FormStamp, AngularJS.html ">Open Source, FormStamp, AngularJS</a>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>

  </body>
</html>
